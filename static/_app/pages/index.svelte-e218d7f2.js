import{S as t,i as a,s,I as e,e as n,c as l,a as r,d as c,b as o,f as h,J as i,H as u,t as f,g as d,K as p,F as v,k as E,n as g,L as m,h as y,M as k,N as T,O as b,P as A,Q as w}from"../chunks/vendor-96df5c7a.js";import{b as D}from"../chunks/paths-45dac81d.js";function P(t,a,s){const e=t.slice();return e[9]=a[s],e}function N(t){let a,s,e=t[12].message+"";return{c(){a=n("p"),s=f(e),this.h()},l(t){a=l(t,"P",{style:!0});var n=r(a);s=d(n,e),n.forEach(c),this.h()},h(){p(a,"color","red")},m(t,e){h(t,a,e),v(a,s)},p:u,d(t){t&&c(a)}}}function S(t){let a,s,e,i,u,p,y,D,N,S,O,x,I,F,H,L,M=[],U=new Map,$=t[0];const B=t=>t[9].id;for(let n=0;n<$.length;n+=1){let a=P(t,$,n),s=B(a);U.set(s,M[n]=j(s,a))}return{c(){a=n("div"),s=n("form"),e=n("input"),i=E(),u=n("button"),p=f("Add"),y=E(),D=n("table"),N=n("th"),S=f("Endpoints"),O=E(),x=n("th"),I=f("Actions"),F=E();for(let t=0;t<M.length;t+=1)M[t].c();this.h()},l(t){a=l(t,"DIV",{class:!0});var n=r(a);s=l(n,"FORM",{});var o=r(s);e=l(o,"INPUT",{type:!0,placeholder:!0}),i=g(o),u=l(o,"BUTTON",{type:!0});var h=r(u);p=d(h,"Add"),h.forEach(c),o.forEach(c),n.forEach(c),y=g(t),D=l(t,"TABLE",{class:!0});var f=r(D);N=l(f,"TH",{class:!0});var v=r(N);S=d(v,"Endpoints"),v.forEach(c),O=g(f),x=l(f,"TH",{colspan:!0,class:!0});var E=r(x);I=d(E,"Actions"),E.forEach(c),F=g(f);for(let a=0;a<M.length;a+=1)M[a].l(f);f.forEach(c),this.h()},h(){o(e,"type","text"),o(e,"placeholder","/user/login"),o(u,"type","submit"),o(a,"class","toolbar svelte-aasrlu"),o(N,"class","svelte-aasrlu"),o(x,"colspan","2"),o(x,"class","svelte-aasrlu"),o(D,"class","svelte-aasrlu")},m(n,l){h(n,a,l),v(a,s),v(s,e),T(e,t[1]),v(s,i),v(s,u),v(u,p),h(n,y,l),h(n,D,l),v(D,N),v(N,S),v(D,O),v(D,x),v(x,I),v(D,F);for(let t=0;t<M.length;t+=1)M[t].m(D,null);H||(L=[m(e,"input",t[5]),m(s,"submit",b(t[4]))],H=!0)},p(t,a){2&a&&e.value!==t[1]&&T(e,t[1]),9&a&&($=t[0],M=A(M,a,B,1,t,$,U,D,w,j,null,P))},d(t){t&&c(a),t&&c(y),t&&c(D);for(let a=0;a<M.length;a+=1)M[a].d();H=!1,k(L)}}}function j(t,a){let s,e,i,u,p,T,b,A,w,P,N,S,j,O,x,I,F,H,L,M=a[9].path+"";function U(){return a[6](a[9])}function $(){return a[7](a[9])}return{key:t,first:null,c(){s=n("tr"),e=n("td"),i=n("span"),u=n("a"),p=f(M),b=E(),A=n("td"),w=n("span"),P=n("a"),N=f("Edit"),S=E(),j=n("td"),O=n("span"),x=n("a"),I=f("Delete"),F=E(),this.h()},l(t){s=l(t,"TR",{class:!0});var a=r(s);e=l(a,"TD",{class:!0});var n=r(e);i=l(n,"SPAN",{});var o=r(i);u=l(o,"A",{href:!0});var h=r(u);p=d(h,M),h.forEach(c),o.forEach(c),n.forEach(c),b=g(a),A=l(a,"TD",{class:!0});var f=r(A);w=l(f,"SPAN",{});var v=r(w);P=l(v,"A",{href:!0});var E=r(P);N=d(E,"Edit"),E.forEach(c),v.forEach(c),f.forEach(c),S=g(a),j=l(a,"TD",{class:!0});var m=r(j);O=l(m,"SPAN",{});var y=r(O);x=l(y,"A",{href:!0});var k=r(x);I=d(k,"Delete"),k.forEach(c),y.forEach(c),m.forEach(c),F=g(a),a.forEach(c),this.h()},h(){o(u,"href",T=D+"/endpoint/"+a[9].id),o(e,"class","svelte-aasrlu"),o(P,"href","#"),o(A,"class","svelte-aasrlu"),o(x,"href","#"),o(j,"class","svelte-aasrlu"),o(s,"class","svelte-aasrlu"),this.first=s},m(t,a){h(t,s,a),v(s,e),v(e,i),v(i,u),v(u,p),v(s,b),v(s,A),v(A,w),v(w,P),v(P,N),v(s,S),v(s,j),v(j,O),v(O,x),v(x,I),v(s,F),H||(L=[m(P,"click",U),m(x,"click",$)],H=!0)},p(t,s){a=t,1&s&&M!==(M=a[9].path+"")&&y(p,M),1&s&&T!==(T=D+"/endpoint/"+a[9].id)&&o(u,"href",T)},d(t){t&&c(s),H=!1,k(L)}}}function O(t){let a,s;return{c(){a=n("p"),s=f("...loading")},l(t){a=l(t,"P",{});var e=r(a);s=d(e,"...loading"),e.forEach(c)},m(t,e){h(t,a,e),v(a,s)},p:u,d(t){t&&c(a)}}}function x(t){let a,s={ctx:t,current:null,token:null,hasCatch:!0,pending:O,then:S,catch:N,error:12};return e(t[2],s),{c(){a=n("div"),s.block.c(),this.h()},l(t){a=l(t,"DIV",{class:!0});var e=r(a);s.block.l(e),e.forEach(c),this.h()},h(){o(a,"class","content")},m(t,e){h(t,a,e),s.block.m(a,s.anchor=null),s.mount=()=>a,s.anchor=null},p(a,[e]){i(s,t=a,e)},i:u,o:u,d(t){t&&c(a),s.block.d(),s.token=null,s=null}}}function I(t,a,s){let e=r(),n=[],l="";async function r(){const t=await fetch("http://localhost:8080/endpoints"),a=await t.json();if(t.ok)return s(0,n=a),a;throw new Error(a)}async function c(t){200===(await fetch(`http://localhost:8080/endpoint/${t}`,{method:"DELETE"})).status&&s(0,n=[...n.slice(0,n.length-1)])}return[n,l,e,c,async function(){if(s(1,l=function(t){let a=t.replace(/\s/g,"");a.length>0&&("/"===a[0]||(a=`/${a}`),a.length>1&&"/"===a[a.length-1]&&(a=a.slice(0,a.length-1)));return a}(l)),0===l.length)return;const t=await fetch("http://localhost:8080/endpoint",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({path:l})});if(200===t.status)await r(),s(1,l="");else try{const a=await t.json();alert(a.message)}catch{alert(`Error: ${t.status}`)}},function(){l=this.value,s(1,l)},t=>async function(t){}(t.id),t=>c(t.id)]}export default class extends t{constructor(t){super(),a(this,t,I,x,s,{})}}
